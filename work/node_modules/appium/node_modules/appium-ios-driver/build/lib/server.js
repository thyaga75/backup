'use strict';

var _regeneratorRuntime = require('babel-runtime/regenerator')['default'];

var _interopRequireDefault = require('babel-runtime/helpers/interop-require-default')['default'];

Object.defineProperty(exports, '__esModule', {
  value: true
});

var _logger = require('./logger');

var _logger2 = _interopRequireDefault(_logger);

var _appiumExpress = require('appium-express');

var _appiumExpress2 = _interopRequireDefault(_appiumExpress);

var _mobileJsonWireProtocol = require('mobile-json-wire-protocol');

var _driver = require('./driver');

function startServer(port, host) {
  var driver, router, server;
  return _regeneratorRuntime.async(function startServer$(context$1$0) {
    while (1) switch (context$1$0.prev = context$1$0.next) {
      case 0:
        driver = new _driver.IosDriver();
        router = (0, _mobileJsonWireProtocol.routeConfiguringFunction)(driver);
        server = (0, _appiumExpress2['default'])(router, port, host);

        _logger2['default'].info('IosDriver server listening on http://' + host + ':' + port);
        return context$1$0.abrupt('return', server);

      case 5:
      case 'end':
        return context$1$0.stop();
    }
  }, null, this);
}

exports.startServer = startServer;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpYi9zZXJ2ZXIuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztzQkFBZ0IsVUFBVTs7Ozs2QkFDWSxnQkFBZ0I7Ozs7c0NBQ2IsMkJBQTJCOztzQkFDMUMsVUFBVTs7QUFFcEMsU0FBZSxXQUFXLENBQUUsSUFBSSxFQUFFLElBQUk7TUFDaEMsTUFBTSxFQUNOLE1BQU0sRUFDTixNQUFNOzs7O0FBRk4sY0FBTSxHQUFHLHVCQUFlO0FBQ3hCLGNBQU0sR0FBRyxzREFBeUIsTUFBTSxDQUFDO0FBQ3pDLGNBQU0sR0FBRyxnQ0FBVyxNQUFNLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQzs7QUFDM0MsNEJBQUksSUFBSSwyQ0FBeUMsSUFBSSxTQUFJLElBQUksQ0FBRyxDQUFDOzRDQUMxRCxNQUFNOzs7Ozs7O0NBQ2Q7O1FBRVEsV0FBVyxHQUFYLFdBQVciLCJmaWxlIjoibGliL3NlcnZlci5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBsb2cgZnJvbSAnLi9sb2dnZXInO1xuaW1wb3J0IHsgZGVmYXVsdCBhcyBiYXNlU2VydmVyIH0gZnJvbSAnYXBwaXVtLWV4cHJlc3MnO1xuaW1wb3J0IHsgcm91dGVDb25maWd1cmluZ0Z1bmN0aW9uIH0gZnJvbSAnbW9iaWxlLWpzb24td2lyZS1wcm90b2NvbCc7XG5pbXBvcnQgeyBJb3NEcml2ZXIgfSBmcm9tICcuL2RyaXZlcic7XG5cbmFzeW5jIGZ1bmN0aW9uIHN0YXJ0U2VydmVyIChwb3J0LCBob3N0KSB7XG4gIGxldCBkcml2ZXIgPSBuZXcgSW9zRHJpdmVyKCk7XG4gIGxldCByb3V0ZXIgPSByb3V0ZUNvbmZpZ3VyaW5nRnVuY3Rpb24oZHJpdmVyKTtcbiAgbGV0IHNlcnZlciA9IGJhc2VTZXJ2ZXIocm91dGVyLCBwb3J0LCBob3N0KTtcbiAgbG9nLmluZm8oYElvc0RyaXZlciBzZXJ2ZXIgbGlzdGVuaW5nIG9uIGh0dHA6Ly8ke2hvc3R9OiR7cG9ydH1gKTtcbiAgcmV0dXJuIHNlcnZlcjtcbn1cblxuZXhwb3J0IHsgc3RhcnRTZXJ2ZXIgfTtcbiJdfQ==