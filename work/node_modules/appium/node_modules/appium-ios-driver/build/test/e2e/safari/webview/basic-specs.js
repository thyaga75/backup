/* globals expect */
'use strict';

var _regeneratorRuntime = require('babel-runtime/regenerator')['default'];

var _interopRequireDefault = require('babel-runtime/helpers/interop-require-default')['default'];

var _desired = require('./desired');

var _desired2 = _interopRequireDefault(_desired);

var _setupBase = require('../../setup-base');

var _setupBase2 = _interopRequireDefault(_setupBase);

var _helpersWebview = require('../../helpers/webview');

describe('safari - webview - basics', function () {
  var _this = this;

  var driver = (0, _setupBase2['default'])(this, _desired2['default'], { 'no-reset': true }).driver;
  beforeEach(function callee$1$0() {
    return _regeneratorRuntime.async(function callee$1$0$(context$2$0) {
      while (1) switch (context$2$0.prev = context$2$0.next) {
        case 0:
          context$2$0.next = 2;
          return _regeneratorRuntime.awrap((0, _helpersWebview.loadWebView)(_desired2['default'], driver));

        case 2:
          return context$2$0.abrupt('return', context$2$0.sent);

        case 3:
        case 'end':
          return context$2$0.stop();
      }
    }, null, _this);
  });

  it('should find a web element in the web view', function callee$1$0() {
    return _regeneratorRuntime.async(function callee$1$0$(context$2$0) {
      while (1) switch (context$2$0.prev = context$2$0.next) {
        case 0:
          context$2$0.next = 2;
          return _regeneratorRuntime.awrap(driver.findElement('id', 'i_am_an_id'));

        case 2:
          context$2$0.sent.should.exist;

        case 3:
        case 'end':
          return context$2$0.stop();
      }
    }, null, _this);
  });

  it('should find multiple web elements in the web view', function callee$1$0() {
    return _regeneratorRuntime.async(function callee$1$0$(context$2$0) {
      while (1) switch (context$2$0.prev = context$2$0.next) {
        case 0:
          context$2$0.next = 2;
          return _regeneratorRuntime.awrap(driver.findElements('tag name', 'a'));

        case 2:
          context$2$0.sent.should.have.length.above(0);

        case 3:
        case 'end':
          return context$2$0.stop();
      }
    }, null, _this);
  });

  it('should fail gracefully to find multiple missing web elements in the web view', function callee$1$0() {
    return _regeneratorRuntime.async(function callee$1$0$(context$2$0) {
      while (1) switch (context$2$0.prev = context$2$0.next) {
        case 0:
          context$2$0.next = 2;
          return _regeneratorRuntime.awrap(driver.findElements('tag name', 'blar'));

        case 2:
          context$2$0.sent.should.have.length(0);

        case 3:
        case 'end':
          return context$2$0.stop();
      }
    }, null, _this);
  });

  it('should find element from another element', function callee$1$0() {
    var el;
    return _regeneratorRuntime.async(function callee$1$0$(context$2$0) {
      while (1) switch (context$2$0.prev = context$2$0.next) {
        case 0:
          context$2$0.next = 2;
          return _regeneratorRuntime.awrap(driver.findElement('class name', 'border'));

        case 2:
          el = context$2$0.sent;
          context$2$0.next = 5;
          return _regeneratorRuntime.awrap(driver.findElementFromElement('xpath', './form', el));

        case 5:
          context$2$0.sent.should.exist;

        case 6:
        case 'end':
          return context$2$0.stop();
      }
    }, null, _this);
  });

  it('should be able to click links', function callee$1$0() {
    var el;
    return _regeneratorRuntime.async(function callee$1$0$(context$2$0) {
      while (1) switch (context$2$0.prev = context$2$0.next) {
        case 0:
          context$2$0.next = 2;
          return _regeneratorRuntime.awrap(driver.findElement('link text', 'i am a link'));

        case 2:
          el = context$2$0.sent;
          context$2$0.next = 5;
          return _regeneratorRuntime.awrap(driver.click(el));

        case 5:
          context$2$0.next = 7;
          return _regeneratorRuntime.awrap((0, _helpersWebview.spinTitle)('I am another page title', driver));

        case 7:
        case 'end':
          return context$2$0.stop();
      }
    }, null, _this);
  });

  it('should retrieve an element attribute', function callee$1$0() {
    var el;
    return _regeneratorRuntime.async(function callee$1$0$(context$2$0) {
      while (1) switch (context$2$0.prev = context$2$0.next) {
        case 0:
          context$2$0.next = 2;
          return _regeneratorRuntime.awrap(driver.findElement('id', 'i_am_an_id'));

        case 2:
          el = context$2$0.sent;
          context$2$0.next = 5;
          return _regeneratorRuntime.awrap(driver.getAttribute('id', el));

        case 5:
          context$2$0.sent.should.be.equal('i_am_an_id');
          context$2$0.next = 8;
          return _regeneratorRuntime.awrap(driver.getAttribute('blar', el));

        case 8:
          context$2$0.t0 = context$2$0.sent;
          expect(context$2$0.t0).to.be['null'];

        case 10:
        case 'end':
          return context$2$0.stop();
      }
    }, null, _this);
  });

  it('should retrieve implicit attributes', function callee$1$0() {
    var els;
    return _regeneratorRuntime.async(function callee$1$0$(context$2$0) {
      while (1) switch (context$2$0.prev = context$2$0.next) {
        case 0:
          context$2$0.next = 2;
          return _regeneratorRuntime.awrap(driver.findElements('tag name', 'option'));

        case 2:
          els = context$2$0.sent;

          els.should.have.length(3);

          context$2$0.next = 6;
          return _regeneratorRuntime.awrap(driver.getAttribute('index', els[2]));

        case 6:
          context$2$0.sent.should.be.equal('2');

        case 7:
        case 'end':
          return context$2$0.stop();
      }
    }, null, _this);
  });

  it('should retrieve an element text', function callee$1$0() {
    var el;
    return _regeneratorRuntime.async(function callee$1$0$(context$2$0) {
      while (1) switch (context$2$0.prev = context$2$0.next) {
        case 0:
          context$2$0.next = 2;
          return _regeneratorRuntime.awrap(driver.findElement('id', 'i_am_an_id'));

        case 2:
          el = context$2$0.sent;
          context$2$0.next = 5;
          return _regeneratorRuntime.awrap(driver.getText(el));

        case 5:
          context$2$0.sent.should.be.equal('I am a div');

        case 6:
        case 'end':
          return context$2$0.stop();
      }
    }, null, _this);
  });

  it.skip('should check if two elements are equals', function callee$1$0() {
    var el1, el2;
    return _regeneratorRuntime.async(function callee$1$0$(context$2$0) {
      while (1) switch (context$2$0.prev = context$2$0.next) {
        case 0:
          context$2$0.next = 2;
          return _regeneratorRuntime.awrap(driver.findElement('id', 'i_am_an_id'));

        case 2:
          el1 = context$2$0.sent;
          context$2$0.next = 5;
          return _regeneratorRuntime.awrap(driver.findElement('css selector', '#i_am_an_id'));

        case 5:
          el2 = context$2$0.sent;

          el1.should.be.equal(el2);

        case 7:
        case 'end':
          return context$2$0.stop();
      }
    }, null, _this);
  });

  it('should return the page source', function callee$1$0() {
    var source;
    return _regeneratorRuntime.async(function callee$1$0$(context$2$0) {
      while (1) switch (context$2$0.prev = context$2$0.next) {
        case 0:
          context$2$0.next = 2;
          return _regeneratorRuntime.awrap(driver.getPageSource());

        case 2:
          source = context$2$0.sent;

          source.should.include('<html');
          source.should.include('I am a page title');
          source.should.include('i appear 3 times');
          source.should.include('</html>');

        case 7:
        case 'end':
          return context$2$0.stop();
      }
    }, null, _this);
  });

  it('should get current url', function callee$1$0() {
    return _regeneratorRuntime.async(function callee$1$0$(context$2$0) {
      while (1) switch (context$2$0.prev = context$2$0.next) {
        case 0:
          context$2$0.next = 2;
          return _regeneratorRuntime.awrap(driver.getUrl());

        case 2:
          context$2$0.sent.should.include('test/guinea-pig');

        case 3:
        case 'end':
          return context$2$0.stop();
      }
    }, null, _this);
  });

  it('should send keystrokes to specific element', function callee$1$0() {
    var el;
    return _regeneratorRuntime.async(function callee$1$0$(context$2$0) {
      while (1) switch (context$2$0.prev = context$2$0.next) {
        case 0:
          context$2$0.next = 2;
          return _regeneratorRuntime.awrap(driver.findElement('id', 'comments'));

        case 2:
          el = context$2$0.sent;
          context$2$0.next = 5;
          return _regeneratorRuntime.awrap(driver.clear(el));

        case 5:
          context$2$0.next = 7;
          return _regeneratorRuntime.awrap(driver.setValue('hello world', el));

        case 7:
          context$2$0.next = 9;
          return _regeneratorRuntime.awrap(driver.getAttribute('value', el));

        case 9:
          context$2$0.sent.should.be.equal('hello world');

        case 10:
        case 'end':
          return context$2$0.stop();
      }
    }, null, _this);
  });

  it('should send keystrokes to active element', function callee$1$0() {
    var el;
    return _regeneratorRuntime.async(function callee$1$0$(context$2$0) {
      while (1) switch (context$2$0.prev = context$2$0.next) {
        case 0:
          context$2$0.next = 2;
          return _regeneratorRuntime.awrap(driver.findElement('id', 'comments'));

        case 2:
          el = context$2$0.sent;
          context$2$0.next = 5;
          return _regeneratorRuntime.awrap(driver.clear(el));

        case 5:
          context$2$0.next = 7;
          return _regeneratorRuntime.awrap(driver.click(el));

        case 7:
          context$2$0.next = 9;
          return _regeneratorRuntime.awrap(driver.keys('hello world'));

        case 9:
          context$2$0.next = 11;
          return _regeneratorRuntime.awrap(driver.getAttribute('value', el));

        case 11:
          context$2$0.sent.should.be.equal('hello world');

        case 12:
        case 'end':
          return context$2$0.stop();
      }
    }, null, _this);
  });

  it('should clear element', function callee$1$0() {
    var el;
    return _regeneratorRuntime.async(function callee$1$0$(context$2$0) {
      while (1) switch (context$2$0.prev = context$2$0.next) {
        case 0:
          context$2$0.next = 2;
          return _regeneratorRuntime.awrap(driver.findElement('id', 'comments'));

        case 2:
          el = context$2$0.sent;
          context$2$0.next = 5;
          return _regeneratorRuntime.awrap(driver.setValue('hello world', el));

        case 5:
          context$2$0.next = 7;
          return _regeneratorRuntime.awrap(driver.getAttribute('value', el));

        case 7:
          context$2$0.sent.should.have.length.above(0);
          context$2$0.next = 10;
          return _regeneratorRuntime.awrap(driver.clear(el));

        case 10:
          context$2$0.next = 12;
          return _regeneratorRuntime.awrap(driver.getAttribute('value', el));

        case 12:
          context$2$0.sent.should.be.equal('');

        case 13:
        case 'end':
          return context$2$0.stop();
      }
    }, null, _this);
  });

  it('should say whether an input is selected', function callee$1$0() {
    var el;
    return _regeneratorRuntime.async(function callee$1$0$(context$2$0) {
      while (1) switch (context$2$0.prev = context$2$0.next) {
        case 0:
          context$2$0.next = 2;
          return _regeneratorRuntime.awrap(driver.findElement('id', 'unchecked_checkbox'));

        case 2:
          el = context$2$0.sent;
          context$2$0.next = 5;
          return _regeneratorRuntime.awrap(driver.elementSelected(el));

        case 5:
          context$2$0.sent.should.not.be.ok;
          context$2$0.next = 8;
          return _regeneratorRuntime.awrap(driver.click(el));

        case 8:
          context$2$0.next = 10;
          return _regeneratorRuntime.awrap(driver.elementSelected(el));

        case 10:
          context$2$0.sent.should.be.ok;

        case 11:
        case 'end':
          return context$2$0.stop();
      }
    }, null, _this);
  });

  it('should be able to retrieve css properties', function callee$1$0() {
    var el;
    return _regeneratorRuntime.async(function callee$1$0$(context$2$0) {
      while (1) switch (context$2$0.prev = context$2$0.next) {
        case 0:
          context$2$0.next = 2;
          return _regeneratorRuntime.awrap(driver.findElement('id', 'fbemail'));

        case 2:
          el = context$2$0.sent;
          context$2$0.next = 5;
          return _regeneratorRuntime.awrap(driver.getCssProperty('background-color', el.ELEMENT));

        case 5:
          context$2$0.sent.should.be.equal('rgba(255, 255, 255, 1)');

        case 6:
        case 'end':
          return context$2$0.stop();
      }
    }, null, _this);
  });

  it('should retrieve an element size', function callee$1$0() {
    var el, size;
    return _regeneratorRuntime.async(function callee$1$0$(context$2$0) {
      while (1) switch (context$2$0.prev = context$2$0.next) {
        case 0:
          context$2$0.next = 2;
          return _regeneratorRuntime.awrap(driver.findElement('id', 'i_am_an_id'));

        case 2:
          el = context$2$0.sent;
          context$2$0.next = 5;
          return _regeneratorRuntime.awrap(driver.getSize(el));

        case 5:
          size = context$2$0.sent;

          size.width.should.be.above(0);
          size.height.should.be.above(0);

        case 8:
        case 'end':
          return context$2$0.stop();
      }
    }, null, _this);
  });

  it('should get location of an element', function callee$1$0() {
    var el, loc;
    return _regeneratorRuntime.async(function callee$1$0$(context$2$0) {
      while (1) switch (context$2$0.prev = context$2$0.next) {
        case 0:
          context$2$0.next = 2;
          return _regeneratorRuntime.awrap(driver.findElement('id', 'fbemail'));

        case 2:
          el = context$2$0.sent;
          context$2$0.next = 5;
          return _regeneratorRuntime.awrap(driver.getLocation(el));

        case 5:
          loc = context$2$0.sent;

          loc.x.should.be.above(0);
          loc.y.should.be.above(0);

        case 8:
        case 'end':
          return context$2$0.stop();
      }
    }, null, _this);
  });

  /**
   * getTagName not supported by mjwp
   */
  it.skip('should retrieve tag name of an element', function callee$1$0() {
    var el, a;
    return _regeneratorRuntime.async(function callee$1$0$(context$2$0) {
      while (1) switch (context$2$0.prev = context$2$0.next) {
        case 0:
          context$2$0.next = 2;
          return _regeneratorRuntime.awrap(driver.findElement('id', 'fbemail'));

        case 2:
          el = context$2$0.sent;
          context$2$0.next = 5;
          return _regeneratorRuntime.awrap(driver.findElement('css selector', 'a'));

        case 5:
          a = context$2$0.sent;
          context$2$0.next = 8;
          return _regeneratorRuntime.awrap(driver.getTagName(el));

        case 8:
          context$2$0.sent.should.be.equal('input');
          context$2$0.next = 11;
          return _regeneratorRuntime.awrap(driver.getTagName(a));

        case 11:
          context$2$0.sent.should.be.equal('a');

        case 12:
        case 'end':
          return context$2$0.stop();
      }
    }, null, _this);
  });

  it('should retrieve a window size', function callee$1$0() {
    var size;
    return _regeneratorRuntime.async(function callee$1$0$(context$2$0) {
      while (1) switch (context$2$0.prev = context$2$0.next) {
        case 0:
          context$2$0.next = 2;
          return _regeneratorRuntime.awrap(driver.getWindowSize());

        case 2:
          size = context$2$0.sent;

          size.height.should.be.above(0);
          size.width.should.be.above(0);

        case 5:
        case 'end':
          return context$2$0.stop();
      }
    }, null, _this);
  });

  it('should move to an arbitrary x-y element and click on it', function callee$1$0() {
    var el;
    return _regeneratorRuntime.async(function callee$1$0$(context$2$0) {
      while (1) switch (context$2$0.prev = context$2$0.next) {
        case 0:
          context$2$0.next = 2;
          return _regeneratorRuntime.awrap(driver.findElement('link text', 'i am a link'));

        case 2:
          el = context$2$0.sent;
          context$2$0.next = 5;
          return _regeneratorRuntime.awrap(driver.moveTo(el, 5, 15));

        case 5:
          context$2$0.next = 7;
          return _regeneratorRuntime.awrap(driver.click(el));

        case 7:
          context$2$0.next = 9;
          return _regeneratorRuntime.awrap((0, _helpersWebview.spinTitle)('I am another page title', driver));

        case 9:
        case 'end':
          return context$2$0.stop();
      }
    }, null, _this);
  });

  it('should submit a form', function callee$1$0() {
    var el, form;
    return _regeneratorRuntime.async(function callee$1$0$(context$2$0) {
      var _this2 = this;

      while (1) switch (context$2$0.prev = context$2$0.next) {
        case 0:
          context$2$0.next = 2;
          return _regeneratorRuntime.awrap(driver.findElement('id', 'comments'));

        case 2:
          el = context$2$0.sent;
          context$2$0.next = 5;
          return _regeneratorRuntime.awrap(driver.findElement('id', 'jumpContact'));

        case 5:
          form = context$2$0.sent;
          context$2$0.next = 8;
          return _regeneratorRuntime.awrap(driver.setValue('This is a comment', el));

        case 8:
          context$2$0.next = 10;
          return _regeneratorRuntime.awrap(driver.submit(form.ELEMENT));

        case 10:
          context$2$0.next = 12;
          return _regeneratorRuntime.awrap((0, _helpersWebview.spinWait)(function callee$2$0() {
            var el;
            return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
              while (1) switch (context$3$0.prev = context$3$0.next) {
                case 0:
                  context$3$0.next = 2;
                  return _regeneratorRuntime.awrap(driver.findElement('id', 'your_comments'));

                case 2:
                  el = context$3$0.sent;
                  context$3$0.next = 5;
                  return _regeneratorRuntime.awrap(driver.getText(el));

                case 5:
                  context$3$0.sent.should.be.equal('Your comments: This is a comment');

                case 6:
                case 'end':
                  return context$3$0.stop();
              }
            }, null, _this2);
          }));

        case 12:
        case 'end':
          return context$2$0.stop();
      }
    }, null, _this);
  });

  it('should return true when the element is displayed', function callee$1$0() {
    var el;
    return _regeneratorRuntime.async(function callee$1$0$(context$2$0) {
      while (1) switch (context$2$0.prev = context$2$0.next) {
        case 0:
          context$2$0.next = 2;
          return _regeneratorRuntime.awrap(driver.findElement('link text', 'i am a link'));

        case 2:
          el = context$2$0.sent;
          context$2$0.next = 5;
          return _regeneratorRuntime.awrap(driver.elementDisplayed(el));

        case 5:
          context$2$0.sent.should.be.ok;

        case 6:
        case 'end':
          return context$2$0.stop();
      }
    }, null, _this);
  });

  it('should return false when the element is not displayed', function callee$1$0() {
    var el;
    return _regeneratorRuntime.async(function callee$1$0$(context$2$0) {
      while (1) switch (context$2$0.prev = context$2$0.next) {
        case 0:
          context$2$0.next = 2;
          return _regeneratorRuntime.awrap(driver.findElement('id', 'invisible div'));

        case 2:
          el = context$2$0.sent;
          context$2$0.next = 5;
          return _regeneratorRuntime.awrap(driver.elementDisplayed(el));

        case 5:
          context$2$0.sent.should.not.be.ok;

        case 6:
        case 'end':
          return context$2$0.stop();
      }
    }, null, _this);
  });

  it('should return true when the element is enabled', function callee$1$0() {
    var el;
    return _regeneratorRuntime.async(function callee$1$0$(context$2$0) {
      while (1) switch (context$2$0.prev = context$2$0.next) {
        case 0:
          context$2$0.next = 2;
          return _regeneratorRuntime.awrap(driver.findElement('link text', 'i am a link'));

        case 2:
          el = context$2$0.sent;
          context$2$0.next = 5;
          return _regeneratorRuntime.awrap(driver.elementEnabled(el));

        case 5:
          context$2$0.sent.should.be.ok;

        case 6:
        case 'end':
          return context$2$0.stop();
      }
    }, null, _this);
  });

  it('should return false when the element is not enabled', function callee$1$0() {
    var el;
    return _regeneratorRuntime.async(function callee$1$0$(context$2$0) {
      while (1) switch (context$2$0.prev = context$2$0.next) {
        case 0:
          context$2$0.next = 2;
          return _regeneratorRuntime.awrap(driver.findElement('id', 'fbemail'));

        case 2:
          el = context$2$0.sent;
          context$2$0.next = 5;
          return _regeneratorRuntime.awrap(driver.execute('$(\'#fbemail\').attr(\'disabled\', \'disabled\');'));

        case 5:
          context$2$0.next = 7;
          return _regeneratorRuntime.awrap(driver.elementEnabled(el));

        case 7:
          context$2$0.sent.should.not.be.ok;

        case 8:
        case 'end':
          return context$2$0.stop();
      }
    }, null, _this);
  });

  it('should return the active element', function callee$1$0() {
    var testText, el, activeEl;
    return _regeneratorRuntime.async(function callee$1$0$(context$2$0) {
      while (1) switch (context$2$0.prev = context$2$0.next) {
        case 0:
          testText = 'hi there';
          context$2$0.next = 3;
          return _regeneratorRuntime.awrap(driver.findElement('id', 'i_am_a_textbox'));

        case 3:
          el = context$2$0.sent;
          context$2$0.next = 6;
          return _regeneratorRuntime.awrap(driver.setValue(testText, el));

        case 6:
          context$2$0.next = 8;
          return _regeneratorRuntime.awrap(driver.active());

        case 8:
          activeEl = context$2$0.sent;
          context$2$0.next = 11;
          return _regeneratorRuntime.awrap(driver.getAttribute('value', activeEl));

        case 11:
          context$2$0.t0 = testText;
          context$2$0.sent.should.be.equal(context$2$0.t0);

        case 13:
        case 'end':
          return context$2$0.stop();
      }
    }, null, _this);
  });

  it('should properly navigate to anchor', function callee$1$0() {
    var curl;
    return _regeneratorRuntime.async(function callee$1$0$(context$2$0) {
      while (1) switch (context$2$0.prev = context$2$0.next) {
        case 0:
          context$2$0.next = 2;
          return _regeneratorRuntime.awrap(driver.getUrl());

        case 2:
          curl = context$2$0.sent;
          context$2$0.next = 5;
          return _regeneratorRuntime.awrap(driver.setUrl(curl));

        case 5:
        case 'end':
          return context$2$0.stop();
      }
    }, null, _this);
  });

  it('should be able to refresh', function callee$1$0() {
    return _regeneratorRuntime.async(function callee$1$0$(context$2$0) {
      while (1) switch (context$2$0.prev = context$2$0.next) {
        case 0:
          context$2$0.next = 2;
          return _regeneratorRuntime.awrap(driver.refresh());

        case 2:
        case 'end':
          return context$2$0.stop();
      }
    }, null, _this);
  });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRlc3QvZTJlL3NhZmFyaS93ZWJ2aWV3L2Jhc2ljLXNwZWNzLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7dUJBQ29CLFdBQVc7Ozs7eUJBQ2Isa0JBQWtCOzs7OzhCQUNhLHVCQUF1Qjs7QUFHeEUsUUFBUSxDQUFDLDJCQUEyQixFQUFFLFlBQVc7OztBQUMvQyxNQUFNLE1BQU0sR0FBRyw0QkFBTSxJQUFJLHdCQUFXLEVBQUMsVUFBVSxFQUFFLElBQUksRUFBQyxDQUFDLENBQUMsTUFBTSxDQUFDO0FBQy9ELFlBQVUsQ0FBQzs7Ozs7MkNBQWtCLHVEQUFxQixNQUFNLENBQUM7Ozs7Ozs7Ozs7R0FBQSxDQUFDLENBQUM7O0FBRTNELElBQUUsQ0FBQywyQ0FBMkMsRUFBRTs7Ozs7MkNBQ3ZDLE1BQU0sQ0FBQyxXQUFXLENBQUMsSUFBSSxFQUFFLFlBQVksQ0FBQzs7OzJCQUFFLE1BQU0sQ0FBQyxLQUFLOzs7Ozs7O0dBQzVELENBQUMsQ0FBQzs7QUFFSCxJQUFFLENBQUMsbURBQW1ELEVBQUU7Ozs7OzJDQUMvQyxNQUFNLENBQUMsWUFBWSxDQUFDLFVBQVUsRUFBRSxHQUFHLENBQUM7OzsyQkFBRSxNQUFNLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQzs7Ozs7OztHQUN4RSxDQUFDLENBQUM7O0FBRUgsSUFBRSxDQUFDLDhFQUE4RSxFQUFFOzs7OzsyQ0FDMUUsTUFBTSxDQUFDLFlBQVksQ0FBQyxVQUFVLEVBQUUsTUFBTSxDQUFDOzs7MkJBQUUsTUFBTSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQzs7Ozs7OztHQUNyRSxDQUFDLENBQUM7O0FBRUgsSUFBRSxDQUFDLDBDQUEwQyxFQUFFO1FBQ3pDLEVBQUU7Ozs7OzJDQUFTLE1BQU0sQ0FBQyxXQUFXLENBQUMsWUFBWSxFQUFFLFFBQVEsQ0FBQzs7O0FBQXJELFlBQUU7OzJDQUNDLE1BQU0sQ0FBQyxzQkFBc0IsQ0FBQyxPQUFPLEVBQUUsUUFBUSxFQUFF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QixDQUFDOzs7QUFBckQsWUFBRTs7MkNBQ0EsTUFBTSxDQUFDLFFBQVEsQ0FBQyxRQUFRLEVBQUUsRUFBRSxDQUFDOzs7OzJDQUNkLE1BQU0sQ0FBQyxNQUFNLEVBQUU7OztBQUFoQyxrQkFBUTs7MkNBQ0wsTUFBTSxDQUFDLFlBQVksQ0FBQyxPQUFPLEVBQUUsUUFBUSxDQUFDOzs7MkJBQWtCLFFBQVE7MkJBQXhCLE1BQU0sQ0FBQyxFQUFFLENBQUMsS0FBSzs7Ozs7OztHQUMvRCxDQUFDLENBQUM7O0FBRUgsSUFBRSxDQUFDLG9DQUFvQyxFQUFFO1FBQ25DLElBQUk7Ozs7OzJDQUFTLE1BQU0sQ0FBQyxNQUFNLEVBQUU7OztBQUE1QixjQUFJOzsyQ0FDRixNQUFNLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQzs7Ozs7OztHQUMxQixDQUFDLENBQUM7O0FBRUgsSUFBRSxDQUFDLDJCQUEyQixFQUFFOzs7OzsyQ0FDeEIsTUFBTSxDQUFDLE9BQU8sRUFBRTs7Ozs7OztHQUN2QixDQUFDLENBQUM7Q0FDSixDQUFDLENBQUMiLCJmaWxlIjoidGVzdC9lMmUvc2FmYXJpL3dlYnZpZXcvYmFzaWMtc3BlY3MuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBnbG9iYWxzIGV4cGVjdCAqL1xuaW1wb3J0IGRlc2lyZWQgZnJvbSAnLi9kZXNpcmVkJztcbmltcG9ydCBzZXR1cCBmcm9tICcuLi8uLi9zZXR1cC1iYXNlJztcbmltcG9ydCB7IGxvYWRXZWJWaWV3LCBzcGluVGl0bGUsIHNwaW5XYWl0IH0gZnJvbSAnLi4vLi4vaGVscGVycy93ZWJ2aWV3JztcblxuXG5kZXNjcmliZSgnc2FmYXJpIC0gd2VidmlldyAtIGJhc2ljcycsIGZ1bmN0aW9uKCkge1xuICBjb25zdCBkcml2ZXIgPSBzZXR1cCh0aGlzLCBkZXNpcmVkLCB7J25vLXJlc2V0JzogdHJ1ZX0pLmRyaXZlcjtcbiAgYmVmb3JlRWFjaChhc3luYyAoKSA9PiBhd2FpdCBsb2FkV2ViVmlldyhkZXNpcmVkLCBkcml2ZXIpKTtcblxuICBpdCgnc2hvdWxkIGZpbmQgYSB3ZWIgZWxlbWVudCBpbiB0aGUgd2ViIHZpZXcnLCBhc3luYyAoKSA9PiB7XG4gICAgKGF3YWl0IGRyaXZlci5maW5kRWxlbWVudCgnaWQnLCAnaV9hbV9hbl9pZCcpKS5zaG91bGQuZXhpc3Q7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgZmluZCBtdWx0aXBsZSB3ZWIgZWxlbWVudHMgaW4gdGhlIHdlYiB2aWV3JywgYXN5bmMgKCkgPT4ge1xuICAgIChhd2FpdCBkcml2ZXIuZmluZEVsZW1lbnRzKCd0YWcgbmFtZScsICdhJykpLnNob3VsZC5oYXZlLmxlbmd0aC5hYm92ZSgwKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBmYWlsIGdyYWNlZnVsbHkgdG8gZmluZCBtdWx0aXBsZSBtaXNzaW5nIHdlYiBlbGVtZW50cyBpbiB0aGUgd2ViIHZpZXcnLCBhc3luYyAoKSA9PiB7XG4gICAgKGF3YWl0IGRyaXZlci5maW5kRWxlbWVudHMoJ3RhZyBuYW1lJywgJ2JsYXInKSkuc2hvdWxkLmhhdmUubGVuZ3RoKDApO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIGZpbmQgZWxlbWVudCBmcm9tIGFub3RoZXIgZWxlbWVudCcsIGFzeW5jICgpID0+IHtcbiAgICBsZXQgZWwgPSBhd2FpdCBkcml2ZXIuZmluZEVsZW1lbnQoJ2NsYXNzIG5hbWUnLCAnYm9yZGVyJyk7XG4gICAgKGF3YWl0IGRyaXZlci5maW5kRWxlbWVudEZyb21FbGVtZW50KCd4cGF0aCcsICcuL2Zvcm0nLCBlbCkpLnNob3VsZC5leGlzdDtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBiZSBhYmxlIHRvIGNsaWNrIGxpbmtzJywgYXN5bmMgKCkgPT4ge1xuICAgIGxldCBlbCA9IGF3YWl0IGRyaXZlci5maW5kRWxlbWVudCgnbGluayB0ZXh0JywgJ2kgYW0gYSBsaW5rJyk7XG4gICAgYXdhaXQgZHJpdmVyLmNsaWNrKGVsKTtcbiAgICBhd2FpdCBzcGluVGl0bGUoJ0kgYW0gYW5vdGhlciBwYWdlIHRpdGxlJywgZHJpdmVyKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCByZXRyaWV2ZSBhbiBlbGVtZW50IGF0dHJpYnV0ZScsIGFzeW5jICgpID0+IHtcbiAgICBsZXQgZWwgPSBhd2FpdCBkcml2ZXIuZmluZEVsZW1lbnQoJ2lkJywgJ2lfYW1fYW5faWQnKTtcbiAgICAoYXdhaXQgZHJpdmVyLmdldEF0dHJpYnV0ZSgnaWQnLCBlbCkpLnNob3VsZC5iZS5lcXVhbCgnaV9hbV9hbl9pZCcpO1xuICAgIGV4cGVjdChhd2FpdCBkcml2ZXIuZ2V0QXR0cmlidXRlKCdibGFyJywgZWwpKS50by5iZS5udWxsO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIHJldHJpZXZlIGltcGxpY2l0IGF0dHJpYnV0ZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgbGV0IGVscyA9IGF3YWl0IGRyaXZlci5maW5kRWxlbWVudHMoJ3RhZyBuYW1lJywgJ29wdGlvbicpO1xuICAgIGVscy5zaG91bGQuaGF2ZS5sZW5ndGgoMyk7XG5cbiAgICAoYXdhaXQgZHJpdmVyLmdldEF0dHJpYnV0ZSgnaW5kZXgnLCBlbHNbMl0pKS5zaG91bGQuYmUuZXF1YWwoJzInKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCByZXRyaWV2ZSBhbiBlbGVtZW50IHRleHQnLCBhc3luYyAoKSA9PiB7XG4gICAgbGV0IGVsID0gYXdhaXQgZHJpdmVyLmZpbmRFbGVtZW50KCdpZCcsICdpX2FtX2FuX2lkJyk7XG4gICAgKGF3YWl0IGRyaXZlci5nZXRUZXh0KGVsKSkuc2hvdWxkLmJlLmVxdWFsKCdJIGFtIGEgZGl2Jyk7XG4gIH0pO1xuXG4gIGl0LnNraXAoJ3Nob3VsZCBjaGVjayBpZiB0d28gZWxlbWVudHMgYXJlIGVxdWFscycsIGFzeW5jICgpID0+IHtcbiAgICBsZXQgZWwxID0gYXdhaXQgZHJpdmVyLmZpbmRFbGVtZW50KCdpZCcsICdpX2FtX2FuX2lkJyk7XG4gICAgbGV0IGVsMiA9IGF3YWl0IGRyaXZlci5maW5kRWxlbWVudCgnY3NzIHNlbGVjdG9yJywgJyNpX2FtX2FuX2lkJyk7XG4gICAgZWwxLnNob3VsZC5iZS5lcXVhbChlbDIpO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIHJldHVybiB0aGUgcGFnZSBzb3VyY2UnLCBhc3luYyAoKSA9PiB7XG4gICAgbGV0IHNvdXJjZSA9IGF3YWl0IGRyaXZlci5nZXRQYWdlU291cmNlKCk7XG4gICAgc291cmNlLnNob3VsZC5pbmNsdWRlKCc8aHRtbCcpO1xuICAgIHNvdXJjZS5zaG91bGQuaW5jbHVkZSgnSSBhbSBhIHBhZ2UgdGl0bGUnKTtcbiAgICBzb3VyY2Uuc2hvdWxkLmluY2x1ZGUoJ2kgYXBwZWFyIDMgdGltZXMnKTtcbiAgICBzb3VyY2Uuc2hvdWxkLmluY2x1ZGUoJzwvaHRtbD4nKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBnZXQgY3VycmVudCB1cmwnLCBhc3luYyAoKSA9PiB7XG4gICAgKGF3YWl0IGRyaXZlci5nZXRVcmwoKSkuc2hvdWxkLmluY2x1ZGUoJ3Rlc3QvZ3VpbmVhLXBpZycpO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIHNlbmQga2V5c3Ryb2tlcyB0byBzcGVjaWZpYyBlbGVtZW50JywgYXN5bmMgKCkgPT4ge1xuICAgIGxldCBlbCA9IGF3YWl0IGRyaXZlci5maW5kRWxlbWVudCgnaWQnLCAnY29tbWVudHMnKTtcbiAgICBhd2FpdCBkcml2ZXIuY2xlYXIoZWwpO1xuICAgIGF3YWl0IGRyaXZlci5zZXRWYWx1ZSgnaGVsbG8gd29ybGQnLCBlbCk7XG4gICAgKGF3YWl0IGRyaXZlci5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJywgZWwpKS5zaG91bGQuYmUuZXF1YWwoJ2hlbGxvIHdvcmxkJyk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgc2VuZCBrZXlzdHJva2VzIHRvIGFjdGl2ZSBlbGVtZW50JywgYXN5bmMgKCkgPT4ge1xuICAgIGxldCBlbCA9IGF3YWl0IGRyaXZlci5maW5kRWxlbWVudCgnaWQnLCAnY29tbWVudHMnKTtcbiAgICBhd2FpdCBkcml2ZXIuY2xlYXIoZWwpO1xuICAgIGF3YWl0IGRyaXZlci5jbGljayhlbCk7XG4gICAgYXdhaXQgZHJpdmVyLmtleXMoJ2hlbGxvIHdvcmxkJyk7XG4gICAgKGF3YWl0IGRyaXZlci5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJywgZWwpKS5zaG91bGQuYmUuZXF1YWwoJ2hlbGxvIHdvcmxkJyk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgY2xlYXIgZWxlbWVudCcsIGFzeW5jICgpID0+IHtcbiAgICBsZXQgZWwgPSBhd2FpdCBkcml2ZXIuZmluZEVsZW1lbnQoJ2lkJywgJ2NvbW1lbnRzJyk7XG4gICAgYXdhaXQgZHJpdmVyLnNldFZhbHVlKCdoZWxsbyB3b3JsZCcsIGVsKTtcbiAgICAoYXdhaXQgZHJpdmVyLmdldEF0dHJpYnV0ZSgndmFsdWUnLCBlbCkpLnNob3VsZC5oYXZlLmxlbmd0aC5hYm92ZSgwKTtcbiAgICBhd2FpdCBkcml2ZXIuY2xlYXIoZWwpO1xuICAgIChhd2FpdCBkcml2ZXIuZ2V0QXR0cmlidXRlKCd2YWx1ZScsIGVsKSkuc2hvdWxkLmJlLmVxdWFsKCcnKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBzYXkgd2hldGhlciBhbiBpbnB1dCBpcyBzZWxlY3RlZCcsIGFzeW5jICgpID0+IHtcbiAgICBsZXQgZWwgPSBhd2FpdCBkcml2ZXIuZmluZEVsZW1lbnQoJ2lkJywgJ3VuY2hlY2tlZF9jaGVja2JveCcpO1xuICAgIChhd2FpdCBkcml2ZXIuZWxlbWVudFNlbGVjdGVkKGVsKSkuc2hvdWxkLm5vdC5iZS5vaztcbiAgICBhd2FpdCBkcml2ZXIuY2xpY2soZWwpO1xuICAgIChhd2FpdCBkcml2ZXIuZWxlbWVudFNlbGVjdGVkKGVsKSkuc2hvdWxkLmJlLm9rO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIGJlIGFibGUgdG8gcmV0cmlldmUgY3NzIHByb3BlcnRpZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgbGV0IGVsID0gYXdhaXQgZHJpdmVyLmZpbmRFbGVtZW50KCdpZCcsICdmYmVtYWlsJyk7XG4gICAgKGF3YWl0IGRyaXZlci5nZXRDc3NQcm9wZXJ0eSgnYmFja2dyb3VuZC1jb2xvcicsIGVsLkVMRU1FTlQpKS5zaG91bGQuYmUuZXF1YWwoJ3JnYmEoMjU1LCAyNTUsIDI1NSwgMSknKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCByZXRyaWV2ZSBhbiBlbGVtZW50IHNpemUnLCBhc3luYyAoKSA9PiB7XG4gICAgbGV0IGVsID0gYXdhaXQgZHJpdmVyLmZpbmRFbGVtZW50KCdpZCcsICdpX2FtX2FuX2lkJyk7XG4gICAgbGV0IHNpemUgPSBhd2FpdCBkcml2ZXIuZ2V0U2l6ZShlbCk7XG4gICAgc2l6ZS53aWR0aC5zaG91bGQuYmUuYWJvdmUoMCk7XG4gICAgc2l6ZS5oZWlnaHQuc2hvdWxkLmJlLmFib3ZlKDApO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIGdldCBsb2NhdGlvbiBvZiBhbiBlbGVtZW50JywgYXN5bmMgKCkgPT4ge1xuICAgIGxldCBlbCA9IGF3YWl0IGRyaXZlci5maW5kRWxlbWVudCgnaWQnLCAnZmJlbWFpbCcpO1xuICAgIGxldCBsb2MgPSBhd2FpdCBkcml2ZXIuZ2V0TG9jYXRpb24oZWwpO1xuICAgIGxvYy54LnNob3VsZC5iZS5hYm92ZSgwKTtcbiAgICBsb2MueS5zaG91bGQuYmUuYWJvdmUoMCk7XG4gIH0pO1xuXG4gIC8qKlxuICAgKiBnZXRUYWdOYW1lIG5vdCBzdXBwb3J0ZWQgYnkgbWp3cFxuICAgKi9cbiAgaXQuc2tpcCgnc2hvdWxkIHJldHJpZXZlIHRhZyBuYW1lIG9mIGFuIGVsZW1lbnQnLCBhc3luYyAoKSA9PiB7XG4gICAgbGV0IGVsID0gYXdhaXQgZHJpdmVyLmZpbmRFbGVtZW50KCdpZCcsICdmYmVtYWlsJyk7XG4gICAgbGV0IGEgPSBhd2FpdCBkcml2ZXIuZmluZEVsZW1lbnQoJ2NzcyBzZWxlY3RvcicsICdhJyk7XG4gICAgKGF3YWl0IGRyaXZlci5nZXRUYWdOYW1lKGVsKSkuc2hvdWxkLmJlLmVxdWFsKCdpbnB1dCcpO1xuICAgIChhd2FpdCBkcml2ZXIuZ2V0VGFnTmFtZShhKSkuc2hvdWxkLmJlLmVxdWFsKCdhJyk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgcmV0cmlldmUgYSB3aW5kb3cgc2l6ZScsIGFzeW5jICgpID0+IHtcbiAgICBsZXQgc2l6ZSA9IGF3YWl0IGRyaXZlci5nZXRXaW5kb3dTaXplKCk7XG4gICAgc2l6ZS5oZWlnaHQuc2hvdWxkLmJlLmFib3ZlKDApO1xuICAgIHNpemUud2lkdGguc2hvdWxkLmJlLmFib3ZlKDApO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIG1vdmUgdG8gYW4gYXJiaXRyYXJ5IHgteSBlbGVtZW50IGFuZCBjbGljayBvbiBpdCcsIGFzeW5jICgpID0+IHtcbiAgICBsZXQgZWwgPSBhd2FpdCBkcml2ZXIuZmluZEVsZW1lbnQoJ2xpbmsgdGV4dCcsICdpIGFtIGEgbGluaycpO1xuICAgIGF3YWl0IGRyaXZlci5tb3ZlVG8oZWwsIDUsIDE1KTtcbiAgICBhd2FpdCBkcml2ZXIuY2xpY2soZWwpO1xuICAgIGF3YWl0IHNwaW5UaXRsZSgnSSBhbSBhbm90aGVyIHBhZ2UgdGl0bGUnLCBkcml2ZXIpO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIHN1Ym1pdCBhIGZvcm0nLCBhc3luYyAoKSA9PiB7XG4gICAgbGV0IGVsID0gYXdhaXQgZHJpdmVyLmZpbmRFbGVtZW50KCdpZCcsICdjb21tZW50cycpO1xuICAgIGxldCBmb3JtID0gYXdhaXQgZHJpdmVyLmZpbmRFbGVtZW50KCdpZCcsICdqdW1wQ29udGFjdCcpO1xuICAgIGF3YWl0IGRyaXZlci5zZXRWYWx1ZSgnVGhpcyBpcyBhIGNvbW1lbnQnLCBlbCk7XG4gICAgYXdhaXQgZHJpdmVyLnN1Ym1pdChmb3JtLkVMRU1FTlQpO1xuICAgIGF3YWl0IHNwaW5XYWl0KGFzeW5jICgpID0+IHtcbiAgICAgIGxldCBlbCA9IGF3YWl0IGRyaXZlci5maW5kRWxlbWVudCgnaWQnLCAneW91cl9jb21tZW50cycpO1xuICAgICAgKGF3YWl0IGRyaXZlci5nZXRUZXh0KGVsKSkuc2hvdWxkLmJlLmVxdWFsKCdZb3VyIGNvbW1lbnRzOiBUaGlzIGlzIGEgY29tbWVudCcpO1xuICAgIH0pO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIHJldHVybiB0cnVlIHdoZW4gdGhlIGVsZW1lbnQgaXMgZGlzcGxheWVkJywgYXN5bmMgKCkgPT4ge1xuICAgIGxldCBlbCA9IGF3YWl0IGRyaXZlci5maW5kRWxlbWVudCgnbGluayB0ZXh0JywgJ2kgYW0gYSBsaW5rJyk7XG4gICAgKGF3YWl0IGRyaXZlci5lbGVtZW50RGlzcGxheWVkKGVsKSkuc2hvdWxkLmJlLm9rO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIHJldHVybiBmYWxzZSB3aGVuIHRoZSBlbGVtZW50IGlzIG5vdCBkaXNwbGF5ZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgbGV0IGVsID0gYXdhaXQgZHJpdmVyLmZpbmRFbGVtZW50KCdpZCcsICdpbnZpc2libGUgZGl2Jyk7XG4gICAgKGF3YWl0IGRyaXZlci5lbGVtZW50RGlzcGxheWVkKGVsKSkuc2hvdWxkLm5vdC5iZS5vaztcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCByZXR1cm4gdHJ1ZSB3aGVuIHRoZSBlbGVtZW50IGlzIGVuYWJsZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgbGV0IGVsID0gYXdhaXQgZHJpdmVyLmZpbmRFbGVtZW50KCdsaW5rIHRleHQnLCAnaSBhbSBhIGxpbmsnKTtcbiAgICAoYXdhaXQgZHJpdmVyLmVsZW1lbnRFbmFibGVkKGVsKSkuc2hvdWxkLmJlLm9rO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIHJldHVybiBmYWxzZSB3aGVuIHRoZSBlbGVtZW50IGlzIG5vdCBlbmFibGVkJywgYXN5bmMgKCkgPT4ge1xuICAgIGxldCBlbCA9IGF3YWl0IGRyaXZlci5maW5kRWxlbWVudCgnaWQnLCAnZmJlbWFpbCcpO1xuICAgIGF3YWl0IGRyaXZlci5leGVjdXRlKGAkKCcjZmJlbWFpbCcpLmF0dHIoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7YCk7XG4gICAgKGF3YWl0IGRyaXZlci5lbGVtZW50RW5hYmxlZChlbCkpLnNob3VsZC5ub3QuYmUub2s7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgcmV0dXJuIHRoZSBhY3RpdmUgZWxlbWVudCcsIGFzeW5jICgpID0+IHtcbiAgICB2YXIgdGVzdFRleHQgPSAnaGkgdGhlcmUnO1xuICAgIGxldCBlbCA9IGF3YWl0IGRyaXZlci5maW5kRWxlbWVudCgnaWQnLCAnaV9hbV9hX3RleHRib3gnKTtcbiAgICBhd2FpdCBkcml2ZXIuc2V0VmFsdWUodGVzdFRleHQsIGVsKTtcbiAgICBsZXQgYWN0aXZlRWwgPSBhd2FpdCBkcml2ZXIuYWN0aXZlKCk7XG4gICAgKGF3YWl0IGRyaXZlci5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJywgYWN0aXZlRWwpKS5zaG91bGQuYmUuZXF1YWwodGVzdFRleHQpO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIHByb3Blcmx5IG5hdmlnYXRlIHRvIGFuY2hvcicsIGFzeW5jICgpID0+IHtcbiAgICBsZXQgY3VybCA9IGF3YWl0IGRyaXZlci5nZXRVcmwoKTtcbiAgICBhd2FpdCBkcml2ZXIuc2V0VXJsKGN1cmwpO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIGJlIGFibGUgdG8gcmVmcmVzaCcsIGFzeW5jICgpID0+IHtcbiAgICBhd2FpdCBkcml2ZXIucmVmcmVzaCgpO1xuICB9KTtcbn0pO1xuIl19