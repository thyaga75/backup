'use strict';

var _getIterator = require('babel-runtime/core-js/get-iterator')['default'];

var _interopRequireDefault = require('babel-runtime/helpers/interop-require-default')['default'];

var _index = require('../index');

var _chai = require('chai');

var _chai2 = _interopRequireDefault(_chai);

var _chaiAsPromised = require('chai-as-promised');

var _chaiAsPromised2 = _interopRequireDefault(_chaiAsPromised);

var _lodash = require('lodash');

var _lodash2 = _interopRequireDefault(_lodash);

_chai2['default'].use(_chaiAsPromised2['default']);

// Error codes and messages have been added according to JsonWireProtocol see
// https://code.google.com/p/selenium/wiki/JsonWireProtocol#Response_Status_Codes
var errorsList = [{ errorName: 'NoSuchDriverError',
  errorMsg: 'A session is either terminated or not started',
  errorCode: 6 }, { errorName: 'NoSuchElementError',
  errorMsg: 'An element could not be located on the page using the ' + 'given search parameters.',
  errorCode: 7 }, { errorName: 'NoSuchFrameError',
  errorMsg: 'A request to switch to a frame could not be satisfied ' + 'because the frame could not be found.',
  errorCode: 8 }, { errorName: 'UnknownCommandError',
  errorMsg: 'The requested resource could not be found, or a request ' + 'was received using an HTTP method that is not supported by ' + 'the mapped resource.',
  errorCode: 9 }, { errorName: 'StaleElementReferenceError',
  errorMsg: 'An element command failed because the referenced element is ' + 'no longer attached to the DOM.',
  errorCode: 10 }, { errorName: 'ElementNotVisibleError',
  errorMsg: 'An element command could not be completed because the ' + 'element is not visible on the page.',
  errorCode: 11 }, { errorName: 'InvalidElementStateError',
  errorMsg: 'An element command could not be completed because the element ' + 'is in an invalid state (e.g. attempting to click a disabled ' + 'element).',
  errorCode: 12 }, { errorName: 'UnknownError',
  errorMsg: 'An unknown server-side error occurred while processing the ' + 'command.',
  errorCode: 13 }, { errorName: 'ElementIsNotSelectableError',
  errorMsg: 'An attempt was made to select an element that cannot ' + 'be selected.',
  errorCode: 15 }, { errorName: 'JavaScriptError',
  errorMsg: 'An error occurred while executing user supplied JavaScript.',
  errorCode: 17 }, { errorName: 'XPathLookupError',
  errorMsg: 'An error occurred while searching for an element by XPath.',
  errorCode: 19 }, { errorName: 'TimeoutError',
  errorMsg: 'An operation did not complete before its timeout expired.',
  errorCode: 21 }, { errorName: 'NoSuchWindowError',
  errorMsg: 'A request to switch to a different window could not be ' + 'satisfied because the window could not be found.',
  errorCode: 23 }, { errorName: 'InvalidCookieDomainError',
  errorMsg: 'An illegal attempt was made to set a cookie under a different ' + 'domain than the current page.',
  errorCode: 24 }, { errorName: 'UnableToSetCookieError',
  errorMsg: 'A request to set a cookie\'s value could not be satisfied.',
  errorCode: 25 }, { errorName: 'UnexpectedAlertOpenError',
  errorMsg: 'A modal dialog was open, blocking this operation',
  errorCode: 26 }, { errorName: 'NoAlertOpenError',
  errorMsg: 'An attempt was made to operate on a modal dialog when one was ' + 'not open.',
  errorCode: 27 }, { errorName: 'ScriptTimeoutError',
  errorMsg: 'A script did not complete before its timeout expired.',
  errorCode: 28 }, { errorName: 'InvalidElementCoordinatesError',
  errorMsg: 'The coordinates provided to an interactions operation are ' + 'invalid.',
  errorCode: 29 }, { errorName: 'IMENotAvailableError',
  errorMsg: 'IME was not available.',
  errorCode: 30 }, { errorName: 'IMEEngineActivationFailedError',
  errorMsg: 'An IME engine could not be started.',
  errorCode: 31 }, { errorName: 'InvalidSelectorError',
  errorMsg: 'Argument was an invalid selector (e.g. XPath/CSS).',
  errorCode: 32 }, { errorName: 'SessionNotCreatedError',
  errorMsg: 'A new session could not be created.',
  errorCode: 33 }, { errorName: 'MoveTargetOutOfBoundsError',
  errorMsg: 'Target provided for a move action is out of bounds.',
  errorCode: 34 }, { errorName: 'NotYetImplementedError',
  errorMsg: 'Method has not yet been implemented',
  errorCode: 13 }];

describe('errors', function () {
  var _iteratorNormalCompletion = true;
  var _didIteratorError = false;
  var _iteratorError = undefined;

  try {
    var _loop = function () {
      var error = _step.value;

      it(error.errorName + ' should have correct code and messg', function () {
        new _index.errors[error.errorName]().should.have.property('jsonwpCode', error.errorCode);
        new _index.errors[error.errorName]().should.have.property('message', error.errorMsg);
      });
    };

    for (var _iterator = _getIterator(errorsList), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
      _loop();
    }
  } catch (err) {
    _didIteratorError = true;
    _iteratorError = err;
  } finally {
    try {
      if (!_iteratorNormalCompletion && _iterator['return']) {
        _iterator['return']();
      }
    } finally {
      if (_didIteratorError) {
        throw _iteratorError;
      }
    }
  }

  it('BadParametersError should not have code and should have messg', function () {
    new _index.errors.BadParametersError().should.not.have.property('jsonwpCode');
    new _index.errors.BadParametersError().should.have.property('message');
  });
});
describe('errorFromCode', function () {
  var _iteratorNormalCompletion2 = true;
  var _didIteratorError2 = false;
  var _iteratorError2 = undefined;

  try {
    var _loop2 = function () {
      var error = _step2.value;

      if (error.errorName !== 'NotYetImplementedError') {
        it(error.errorCode + ' should return correct error', function () {
          (0, _index.errorFromCode)(error.errorCode).should.have.property('jsonwpCode', error.errorCode);
          (0, _index.errorFromCode)(error.errorCode).should.have.property('message', error.errorMsg);
          if (!_lodash2['default'].includes([13, 33], error.errorCode)) {
            (0, _index.errorFromCode)(error.errorCode, 'abcd').should.have.property('jsonwpCode', error.errorCode);
            (0, _index.errorFromCode)(error.errorCode, 'abcd').should.have.property('message', 'abcd');
          }
        });
      }
    };

    for (var _iterator2 = _getIterator(errorsList), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {
      _loop2();
    }
  } catch (err) {
    _didIteratorError2 = true;
    _iteratorError2 = err;
  } finally {
    try {
      if (!_iteratorNormalCompletion2 && _iterator2['return']) {
        _iterator2['return']();
      }
    } finally {
      if (_didIteratorError2) {
        throw _iteratorError2;
      }
    }
  }

  it('should throw unknown error for unknown code', function () {
    (0, _index.errorFromCode)(99).should.have.property('jsonwpCode', 13);
    (0, _index.errorFromCode)(99).should.have.property('message', 'An unknown server-side error occurred ' + 'while processing the command.');
  });
});
//# sourceMappingURL=data:application/json;base64,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Ozs7Ozs7QUFDRCxJQUFFLENBQUMsNkNBQTZDLEVBQUUsWUFBTTtBQUN0RCw4QkFBYyxFQUFFLENBQUMsQ0FDZCxNQUFNLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxZQUFZLEVBQUUsRUFBRSxDQUFDLENBQUM7QUFDMUMsOEJBQWMsRUFBRSxDQUFDLENBQ2QsTUFBTSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsU0FBUyxFQUFFLHdDQUF3QyxHQUN4QywrQkFBK0IsQ0FBQyxDQUFDO0dBQ3JFLENBQUMsQ0FBQztDQUNKLENBQUMsQ0FBQyIsImZpbGUiOiJ0ZXN0L2Vycm9ycy1zcGVjcy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGVycm9ycywgZXJyb3JGcm9tQ29kZSB9IGZyb20gJy4uL2luZGV4JztcbmltcG9ydCBjaGFpIGZyb20gJ2NoYWknO1xuaW1wb3J0IGNoYWlBc1Byb21pc2VkIGZyb20gJ2NoYWktYXMtcHJvbWlzZWQnO1xuaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcblxuY2hhaS51c2UoY2hhaUFzUHJvbWlzZWQpO1xuXG4vLyBFcnJvciBjb2RlcyBhbmQgbWVzc2FnZXMgaGF2ZSBiZWVuIGFkZGVkIGFjY29yZGluZyB0byBKc29uV2lyZVByb3RvY29sIHNlZVxuLy8gaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC9zZWxlbml1bS93aWtpL0pzb25XaXJlUHJvdG9jb2wjUmVzcG9uc2VfU3RhdHVzX0NvZGVzXG5sZXQgZXJyb3JzTGlzdCA9IFtcbiAge2Vycm9yTmFtZTogJ05vU3VjaERyaXZlckVycm9yJyxcbiAgIGVycm9yTXNnOiAnQSBzZXNzaW9uIGlzIGVpdGhlciB0ZXJtaW5hdGVkIG9yIG5vdCBzdGFydGVkJyxcbiAgIGVycm9yQ29kZTogNn0sXG4gIHtlcnJvck5hbWU6ICdOb1N1Y2hFbGVtZW50RXJyb3InLFxuICAgZXJyb3JNc2c6ICdBbiBlbGVtZW50IGNvdWxkIG5vdCBiZSBsb2NhdGVkIG9uIHRoZSBwYWdlIHVzaW5nIHRoZSAnICtcbiAgICAgICAgICAgICAnZ2l2ZW4gc2VhcmNoIHBhcmFtZXRlcnMuJyxcbiAgIGVycm9yQ29kZTogN30sXG4gIHtlcnJvck5hbWU6ICdOb1N1Y2hGcmFtZUVycm9yJyxcbiAgIGVycm9yTXNnOiAnQSByZXF1ZXN0IHRvIHN3aXRjaCB0byBhIGZyYW1lIGNvdWxkIG5vdCBiZSBzYXRpc2ZpZWQgJyArXG4gICAgICAgICAgICAgJ2JlY2F1c2UgdGhlIGZyYW1lIGNvdWxkIG5vdCBiZSBmb3VuZC4nLFxuICAgZXJyb3JDb2RlOiA4fSxcbiAge2Vycm9yTmFtZTogJ1Vua25vd25Db21tYW5kRXJyb3InLFxuICAgZXJyb3JNc2c6ICdUaGUgcmVxdWVzdGVkIHJlc291cmNlIGNvdWxkIG5vdCBiZSBmb3VuZCwgb3IgYSByZXF1ZXN0ICcgK1xuICAgICAgICAgICAgICd3YXMgcmVjZWl2ZWQgdXNpbmcgYW4gSFRUUCBtZXRob2QgdGhhdCBpcyBub3Qgc3VwcG9ydGVkIGJ5ICcgK1xuICAgICAgICAgICAgICd0aGUgbWFwcGVkIHJlc291cmNlLicsXG4gICBlcnJvckNvZGU6IDl9LFxuICB7ZXJyb3JOYW1lOiAnU3RhbGVFbGVtZW50UmVmZXJlbmNlRXJyb3InLFxuICAgZXJyb3JNc2c6ICdBbiBlbGVtZW50IGNvbW1hbmQgZmFpbGVkIGJlY2F1c2UgdGhlIHJlZmVyZW5jZWQgZWxlbWVudCBpcyAnICtcbiAgICAgICAgICAgICAnbm8gbG9uZ2VyIGF0dGFjaGVkIHRvIHRoZSBET00uJyxcbiAgIGVycm9yQ29kZTogMTB9LFxuICB7ZXJyb3JOYW1lOiAnRWxlbWVudE5vdFZpc2libGVFcnJvcicsXG4gICBlcnJvck1zZzogJ0FuIGVsZW1lbnQgY29tbWFuZCBjb3VsZCBub3QgYmUgY29tcGxldGVkIGJlY2F1c2UgdGhlICcgK1xuICAgICAgICAgICAgICdlbGVtZW50IGlzIG5vdCB2aXNpYmxlIG9uIHRoZSBwYWdlLicsXG4gICBlcnJvckNvZGU6IDExfSxcbiAge2Vycm9yTmFtZTogJ0ludmFsaWRFbGVtZW50U3RhdGVFcnJvcicsXG4gICBlcnJvck1zZzogJ0FuIGVsZW1lbnQgY29tbWFuZCBjb3VsZCBub3QgYmUgY29tcGxldGVkIGJlY2F1c2UgdGhlIGVsZW1lbnQgJyArXG4gICAgICAgICAgICAgJ2lzIGluIGFuIGludmFsaWQgc3RhdGUgKGUuZy4gYXR0ZW1wdGluZyB0byBjbGljayBhIGRpc2FibGVkICcgK1xuICAgICAgICAgICAgICdlbGVtZW50KS4nLFxuICAgZXJyb3JDb2RlOiAxMn0sXG4gIHtlcnJvck5hbWU6ICdVbmtub3duRXJyb3InLFxuICAgZXJyb3JNc2c6ICdBbiB1bmtub3duIHNlcnZlci1zaWRlIGVycm9yIG9jY3VycmVkIHdoaWxlIHByb2Nlc3NpbmcgdGhlICcgK1xuICAgICAgICAgICAgICdjb21tYW5kLicsXG4gICBlcnJvckNvZGU6IDEzfSxcbiAge2Vycm9yTmFtZTogJ0VsZW1lbnRJc05vdFNlbGVjdGFibGVFcnJvcicsXG4gICBlcnJvck1zZzogJ0FuIGF0dGVtcHQgd2FzIG1hZGUgdG8gc2VsZWN0IGFuIGVsZW1lbnQgdGhhdCBjYW5ub3QgJyArXG4gICAgICAgICAgICAgJ2JlIHNlbGVjdGVkLicsXG4gICBlcnJvckNvZGU6IDE1fSxcbiAge2Vycm9yTmFtZTogJ0phdmFTY3JpcHRFcnJvcicsXG4gICBlcnJvck1zZzogJ0FuIGVycm9yIG9jY3VycmVkIHdoaWxlIGV4ZWN1dGluZyB1c2VyIHN1cHBsaWVkIEphdmFTY3JpcHQuJyxcbiAgIGVycm9yQ29kZTogMTd9LFxuICB7ZXJyb3JOYW1lOiAnWFBhdGhMb29rdXBFcnJvcicsXG4gICBlcnJvck1zZzogJ0FuIGVycm9yIG9jY3VycmVkIHdoaWxlIHNlYXJjaGluZyBmb3IgYW4gZWxlbWVudCBieSBYUGF0aC4nLFxuICAgZXJyb3JDb2RlOiAxOX0sXG4gIHtlcnJvck5hbWU6ICdUaW1lb3V0RXJyb3InLFxuICAgZXJyb3JNc2c6ICdBbiBvcGVyYXRpb24gZGlkIG5vdCBjb21wbGV0ZSBiZWZvcmUgaXRzIHRpbWVvdXQgZXhwaXJlZC4nLFxuICAgZXJyb3JDb2RlOiAyMX0sXG4gIHtlcnJvck5hbWU6ICdOb1N1Y2hXaW5kb3dFcnJvcicsXG4gICBlcnJvck1zZzogJ0EgcmVxdWVzdCB0byBzd2l0Y2ggdG8gYSBkaWZmZXJlbnQgd2luZG93IGNvdWxkIG5vdCBiZSAnICtcbiAgICAgICAgICAgICAnc2F0aXNmaWVkIGJlY2F1c2UgdGhlIHdpbmRvdyBjb3VsZCBub3QgYmUgZm91bmQuJyxcbiAgIGVycm9yQ29kZTogMjN9LFxuICB7ZXJyb3JOYW1lOiAnSW52YWxpZENvb2tpZURvbWFpbkVycm9yJyxcbiAgIGVycm9yTXNnOiAnQW4gaWxsZWdhbCBhdHRlbXB0IHdhcyBtYWRlIHRvIHNldCBhIGNvb2tpZSB1bmRlciBhIGRpZmZlcmVudCAnICtcbiAgICAgICAgICAgICAnZG9tYWluIHRoYW4gdGhlIGN1cnJlbnQgcGFnZS4nLFxuICAgZXJyb3JDb2RlOiAyNH0sXG4gIHtlcnJvck5hbWU6ICdVbmFibGVUb1NldENvb2tpZUVycm9yJyxcbiAgIGVycm9yTXNnOiBgQSByZXF1ZXN0IHRvIHNldCBhIGNvb2tpZSdzIHZhbHVlIGNvdWxkIG5vdCBiZSBzYXRpc2ZpZWQuYCxcbiAgIGVycm9yQ29kZTogMjV9LFxuICB7ZXJyb3JOYW1lOiAnVW5leHBlY3RlZEFsZXJ0T3BlbkVycm9yJyxcbiAgIGVycm9yTXNnOiAnQSBtb2RhbCBkaWFsb2cgd2FzIG9wZW4sIGJsb2NraW5nIHRoaXMgb3BlcmF0aW9uJyxcbiAgIGVycm9yQ29kZTogMjZ9LFxuICB7ZXJyb3JOYW1lOiAnTm9BbGVydE9wZW5FcnJvcicsXG4gICBlcnJvck1zZzogJ0FuIGF0dGVtcHQgd2FzIG1hZGUgdG8gb3BlcmF0ZSBvbiBhIG1vZGFsIGRpYWxvZyB3aGVuIG9uZSB3YXMgJyArXG4gICAgICAgICAgICAgJ25vdCBvcGVuLicsXG4gICBlcnJvckNvZGU6IDI3fSxcbiAge2Vycm9yTmFtZTogJ1NjcmlwdFRpbWVvdXRFcnJvcicsXG4gICBlcnJvck1zZzogJ0Egc2NyaXB0IGRpZCBub3QgY29tcGxldGUgYmVmb3JlIGl0cyB0aW1lb3V0IGV4cGlyZWQuJyxcbiAgIGVycm9yQ29kZTogMjh9LFxuICB7ZXJyb3JOYW1lOiAnSW52YWxpZEVsZW1lbnRDb29yZGluYXRlc0Vycm9yJyxcbiAgIGVycm9yTXNnOiAnVGhlIGNvb3JkaW5hdGVzIHByb3ZpZGVkIHRvIGFuIGludGVyYWN0aW9ucyBvcGVyYXRpb24gYXJlICcgK1xuICAgICAgICAgICAgICdpbnZhbGlkLicsXG4gICBlcnJvckNvZGU6IDI5fSxcbiAge2Vycm9yTmFtZTogJ0lNRU5vdEF2YWlsYWJsZUVycm9yJyxcbiAgIGVycm9yTXNnOiAnSU1FIHdhcyBub3QgYXZhaWxhYmxlLicsXG4gICBlcnJvckNvZGU6IDMwfSxcbiAge2Vycm9yTmFtZTogJ0lNRUVuZ2luZUFjdGl2YXRpb25GYWlsZWRFcnJvcicsXG4gICBlcnJvck1zZzogJ0FuIElNRSBlbmdpbmUgY291bGQgbm90IGJlIHN0YXJ0ZWQuJyxcbiAgIGVycm9yQ29kZTogMzF9LFxuICB7ZXJyb3JOYW1lOiAnSW52YWxpZFNlbGVjdG9yRXJyb3InLFxuICAgZXJyb3JNc2c6ICdBcmd1bWVudCB3YXMgYW4gaW52YWxpZCBzZWxlY3RvciAoZS5nLiBYUGF0aC9DU1MpLicsXG4gICBlcnJvckNvZGU6IDMyfSxcbiAge2Vycm9yTmFtZTogJ1Nlc3Npb25Ob3RDcmVhdGVkRXJyb3InLFxuICAgZXJyb3JNc2c6ICdBIG5ldyBzZXNzaW9uIGNvdWxkIG5vdCBiZSBjcmVhdGVkLicsXG4gICBlcnJvckNvZGU6IDMzfSxcbiAge2Vycm9yTmFtZTogJ01vdmVUYXJnZXRPdXRPZkJvdW5kc0Vycm9yJyxcbiAgIGVycm9yTXNnOiAnVGFyZ2V0IHByb3ZpZGVkIGZvciBhIG1vdmUgYWN0aW9uIGlzIG91dCBvZiBib3VuZHMuJyxcbiAgIGVycm9yQ29kZTogMzR9LFxuICB7ZXJyb3JOYW1lOiAnTm90WWV0SW1wbGVtZW50ZWRFcnJvcicsXG4gICBlcnJvck1zZzogJ01ldGhvZCBoYXMgbm90IHlldCBiZWVuIGltcGxlbWVudGVkJyxcbiAgIGVycm9yQ29kZTogMTN9XG5dO1xuXG5kZXNjcmliZSgnZXJyb3JzJywgKCkgPT4ge1xuICBmb3IgKGxldCBlcnJvciBvZiBlcnJvcnNMaXN0KSB7XG4gICAgaXQoZXJyb3IuZXJyb3JOYW1lICsgJyBzaG91bGQgaGF2ZSBjb3JyZWN0IGNvZGUgYW5kIG1lc3NnJywgKCkgPT4ge1xuICAgICAgbmV3IGVycm9yc1tlcnJvci5lcnJvck5hbWVdKClcbiAgICAgICAgLnNob3VsZC5oYXZlLnByb3BlcnR5KCdqc29ud3BDb2RlJywgZXJyb3IuZXJyb3JDb2RlKTtcbiAgICAgIG5ldyBlcnJvcnNbZXJyb3IuZXJyb3JOYW1lXSgpXG4gICAgICAgIC5zaG91bGQuaGF2ZS5wcm9wZXJ0eSgnbWVzc2FnZScsIGVycm9yLmVycm9yTXNnKTtcbiAgICB9KTtcbiAgfVxuICBpdCgnQmFkUGFyYW1ldGVyc0Vycm9yIHNob3VsZCBub3QgaGF2ZSBjb2RlIGFuZCBzaG91bGQgaGF2ZSBtZXNzZycsICgpID0+IHtcbiAgICBuZXcgZXJyb3JzLkJhZFBhcmFtZXRlcnNFcnJvcigpXG4gICAgICAuc2hvdWxkLm5vdC5oYXZlLnByb3BlcnR5KCdqc29ud3BDb2RlJyk7XG4gICAgbmV3IGVycm9ycy5CYWRQYXJhbWV0ZXJzRXJyb3IoKVxuICAgICAgLnNob3VsZC5oYXZlLnByb3BlcnR5KCdtZXNzYWdlJyk7XG4gIH0pO1xufSk7XG5kZXNjcmliZSgnZXJyb3JGcm9tQ29kZScsICgpID0+IHtcbiAgZm9yIChsZXQgZXJyb3Igb2YgZXJyb3JzTGlzdCkge1xuICAgIGlmIChlcnJvci5lcnJvck5hbWUgIT09ICdOb3RZZXRJbXBsZW1lbnRlZEVycm9yJykge1xuICAgICAgaXQoZXJyb3IuZXJyb3JDb2RlICsgJyBzaG91bGQgcmV0dXJuIGNvcnJlY3QgZXJyb3InLCAoKSA9PiB7XG4gICAgICAgIGVycm9yRnJvbUNvZGUoZXJyb3IuZXJyb3JDb2RlKVxuICAgICAgICAgIC5zaG91bGQuaGF2ZS5wcm9wZXJ0eSgnanNvbndwQ29kZScsIGVycm9yLmVycm9yQ29kZSk7XG4gICAgICAgIGVycm9yRnJvbUNvZGUoZXJyb3IuZXJyb3JDb2RlKVxuICAgICAgICAgIC5zaG91bGQuaGF2ZS5wcm9wZXJ0eSgnbWVzc2FnZScsIGVycm9yLmVycm9yTXNnKTtcbiAgICAgICAgaWYoIV8uaW5jbHVkZXMoWzEzLCAzM10sZXJyb3IuZXJyb3JDb2RlKSkge1xuICAgICAgICAgIGVycm9yRnJvbUNvZGUoZXJyb3IuZXJyb3JDb2RlLCAnYWJjZCcpXG4gICAgICAgICAgICAuc2hvdWxkLmhhdmUucHJvcGVydHkoJ2pzb253cENvZGUnLCBlcnJvci5lcnJvckNvZGUpO1xuICAgICAgICAgIGVycm9yRnJvbUNvZGUoZXJyb3IuZXJyb3JDb2RlLCAnYWJjZCcpXG4gICAgICAgICAgICAuc2hvdWxkLmhhdmUucHJvcGVydHkoJ21lc3NhZ2UnLCAnYWJjZCcpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbiAgaXQoJ3Nob3VsZCB0aHJvdyB1bmtub3duIGVycm9yIGZvciB1bmtub3duIGNvZGUnLCAoKSA9PiB7XG4gICAgZXJyb3JGcm9tQ29kZSg5OSlcbiAgICAgIC5zaG91bGQuaGF2ZS5wcm9wZXJ0eSgnanNvbndwQ29kZScsIDEzKTtcbiAgICBlcnJvckZyb21Db2RlKDk5KVxuICAgICAgLnNob3VsZC5oYXZlLnByb3BlcnR5KCdtZXNzYWdlJywgJ0FuIHVua25vd24gc2VydmVyLXNpZGUgZXJyb3Igb2NjdXJyZWQgJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnd2hpbGUgcHJvY2Vzc2luZyB0aGUgY29tbWFuZC4nKTtcbiAgfSk7XG59KTtcbiJdfQ==